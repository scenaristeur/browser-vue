(function(){var t={4002:function(t,e,n){"use strict";var o=n(9963),i=n(6252);const s=(0,i._)("header",{class:"header"}," Ipfs Browser ",-1);function r(t,e,n,o,r,l){const a=(0,i.up)("FileBrowser"),c=(0,i.up)("CurrentCid"),u=(0,i.up)("OperationResult"),p=(0,i.up)("IpnsView"),d=(0,i.up)("ExecuteCode"),f=(0,i.up)("IpfsInfo");return(0,i.wg)(),(0,i.iD)(i.HY,null,[s,(0,i.Wm)(a),(0,i.Wm)(c),(0,i.Wm)(u),(0,i.Wm)(p),(0,i.Wm)(d),(0,i._)("footer",null,[(0,i.Wm)(f)])],64)}var l=n(3577);const a={key:0,class:"ipfs-info"},c={id:"ipfs-info-id"},u={id:"ipfs-info-agent"};function p(t,e,n,o,s,r){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("h3",null,(0,l.zw)(r.status),1),r.online?((0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("h3",null,[(0,i.Uk)(" ID: "),(0,i._)("span",c,(0,l.zw)(r.node.id),1)]),(0,i._)("h3",null,[(0,i.Uk)(" Agent version: "),(0,i._)("span",u,(0,l.zw)(r.node.agentVersion),1)])])):(0,i.kq)("",!0)],64)}var d={name:"IpfsInfo",computed:{online(){return this.$store.state.ipfs.online},node(){return this.$store.state.ipfs.node},status(){return this.$store.state.ipfs.status}}},f=n(3744);const h=(0,f.Z)(d,[["render",p]]);var m=h;const g=t=>((0,i.dD)("data-v-66a379b6"),t=t(),(0,i.Cn)(),t),w={key:0,class:"browser"},y=g((()=>(0,i._)("h3",null,"Browser",-1))),v=g((()=>(0,i._)("hr",null,null,-1)));function _(t,e,n,o,s,r){const l=(0,i.up)("UploadFiles"),a=(0,i.up)("CurrentContent");return 1==r.online?((0,i.wg)(),(0,i.iD)("div",w,[y,(0,i._)("div",null,[(0,i._)("button",{onClick:e[0]||(e[0]=t=>r.getFolder("/"))},"root folder"),(0,i._)("button",{onClick:e[1]||(e[1]=t=>r.getFolder("/ipfs/QmYLMaBa9bd2cfkD8UU3boFC7bRrCR74KnxGF2cFrpbyLf"))},"new computer"),(0,i._)("button",{onClick:e[2]||(e[2]=t=>r.getFolder("/ipns/k51qzi5uqu5dkuj0d4lkcpgv8eybu6e7wtoofxw0oh5as13ztzqu1lkd0nlzvn"))},"vm-16-bit"),(0,i._)("button",{onClick:e[3]||(e[3]=(...t)=>r.addFolder&&r.addFolder(...t))},"add (sub)folder"),(0,i.Wm)(l),(0,i._)("button",{onClick:e[4]||(e[4]=(...t)=>r.openLoader&&r.openLoader(...t))},"Load a remote computer"),(0,i._)("button",{onClick:e[5]||(e[5]=(...t)=>r.publish&&r.publish(...t))},"Publish")]),v,(0,i.Wm)(a)])):(0,i.kq)("",!0)}const b={key:0,class:"current-content"},k={key:0},C={key:1},$={class:"scroll"},D={key:0},P=["value","id"],O=["onClick"],x=["onClick"],F=["value","id"],I={key:0},U={key:1};function S(t,e,n,s,r,a){const c=(0,i.up)("GatewayLink"),u=(0,i.up)("GatewayPreview");return null!=a.current?((0,i.wg)(),(0,i.iD)("div",b,[(0,i.wy)((0,i._)("input",{ref:"current","onUpdate:modelValue":e[0]||(e[0]=t=>a.current._path=t)},null,512),[[o.nr,a.current._path]]),void 0!=r.content.folders?((0,i.wg)(),(0,i.iD)("span",k,(0,l.zw)(r.content.folders.length)+" folders | "+(0,l.zw)(r.content.files.length)+" files",1)):(0,i.kq)("",!0),r.selected.length>0?((0,i.wg)(),(0,i.iD)("div",C,[(0,i.Uk)(" selected : "+(0,l.zw)(r.selected)+" ",1),(0,i._)("button",{onClick:e[1]||(e[1]=(...t)=>a.cut&&a.cut(...t))},"cut"),(0,i._)("button",{onClick:e[2]||(e[2]=(...t)=>a.paste&&a.paste(...t))},"paste"),(0,i._)("button",{onClick:e[3]||(e[3]=(...t)=>a.move&&a.move(...t)),disabled:""},"move"),(0,i._)("button",{onClick:e[4]||(e[4]=(...t)=>a.remove&&a.remove(...t))},"delete")])):(0,i.kq)("",!0),(0,i._)("div",$,[(0,i._)("ul",null,["/"!=a.current._path?((0,i.wg)(),(0,i.iD)("li",D,[(0,i._)("button",{onClick:e[5]||(e[5]=(...t)=>a.getParent&&a.getParent(...t))}," ðŸ“ ..")])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.content.folders,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.cid},[(0,i.wy)((0,i._)("input",{type:"checkbox",value:t.name,id:t.name,"onUpdate:modelValue":e[6]||(e[6]=t=>r.selected=t)},null,8,P),[[o.e8,r.selected]]),"directory"==t.type?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:e=>a.getFolder(t.name)}," ðŸ“ "+(0,l.zw)(t.name),9,O)):((0,i.wg)(),(0,i.iD)("button",{key:1,onClick:e=>a.load(t)},"ðŸ“ "+(0,l.zw)(t.name)+" *",9,x)),(0,i.Wm)(c,{item:t},null,8,["item"])])))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.content.files,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.cid,style:{"v-align":"center"}},[(0,i.wy)((0,i._)("input",{type:"checkbox",value:t.name,id:t.name,"onUpdate:modelValue":e[7]||(e[7]=t=>r.selected=t)},null,8,F),[[o.e8,r.selected]]),t.name.endsWith("png")||t.name.endsWith(".jpg")||t.name.endsWith(".jpeg")?((0,i.wg)(),(0,i.iD)("span",I,[(0,i.Uk)("ðŸ–¼ "),(0,i.Wm)(u,{item:t},null,8,["item"])])):((0,i.wg)(),(0,i.iD)("span",U," ðŸ“„")),(0,i.Uk)((0,l.zw)(t.name)+" ",1),(0,i.Wm)(c,{item:t},null,8,["item"])])))),128))])])])):(0,i.kq)("",!0)}const W=["href"];function z(t,e,n,o,s,r){return(0,i.wg)(),(0,i.iD)("a",{href:"https://ipfs.io/ipfs/"+n.item.cid,target:"_blank"},(0,l.zw)(n.item.name||n.item.cid),9,W)}var j={name:"GatewayLink",props:["item"]};const R=(0,f.Z)(j,[["render",z],["__scopeId","data-v-162800f4"]]);var q=R;const E=["href"],L=["src"];function Z(t,e,n,o,s,r){return(0,i.wg)(),(0,i.iD)("a",{class:"gateway-preview",href:"https://ipfs.io/ipfs/"+n.item.cid,target:"_blank"},[(0,i._)("img",{src:"https://ipfs.io/ipfs/"+n.item.cid,width:"40"},null,8,L)],8,E)}var G={name:"GatewayPreview",props:["item"]};const K=(0,f.Z)(G,[["render",Z],["__scopeId","data-v-0e062696"]]);var H=K,Y={name:"CurrentContent",components:{GatewayLink:q,GatewayPreview:H},data(){return{content:{},selected:[]}},methods:{getFolder(t){let e=this.current._path.endsWith("/")?this.current._path:this.current._path+"/",n=e+t;console.log(n),this.$get(n)},getParent(){let t=this.current._path.split("/").filter(((t,e,n)=>e!==n.length-(""===t?2:1))).join("/");console.log("parent",t),0==t.length&&(t="/"),this.$get(t)},cut(){let t=this.current._path.endsWith("/")?this.current._path:this.current._path+"/";console.log(this.selected);let e=this.selected.map((e=>t+e));this.$store.commit("ipfs/setClipboard",e)},async paste(){console.log(this.clipboard);for await(const t of this.clipboard)await this.$ipfs.files.mv(t,this.current._path,{parents:!0,flush:!0});this.$get(this.current._path),this.selected=[]},move(){console.log(this.selected),this.$move()},async remove(){console.log(this.selected);let t=this.current._path.endsWith("/")?this.current._path:this.current._path+"/";console.log(this.selected);let e=this.selected.map((e=>t+e));for await(const n of e)await this.$ipfs.files.rm(n,{recursive:!0});this.$get(this.current._path),this.selected=[]},async load(t){console.log(t.cid.toString()),this.$load("/"+t.cid.toString())}},watch:{currentContent(){this.content.folders=this.currentContent.filter((t=>t.type.startsWith("dir"))).sort(((t,e)=>t.name>e.name?1:e.name>t.name?-1:0)),this.content.files=this.currentContent.filter((t=>"file"==t.type)).sort(((t,e)=>t.name>e.name?1:e.name>t.name?-1:0)),console.log(this.content)}},computed:{currentContent(){return this.$store.state.ipfs.currentContent},current(){return this.$store.state.ipfs.current},clipboard(){return this.$store.state.ipfs.clipboard}}};const B=(0,f.Z)(Y,[["render",S],["__scopeId","data-v-14cbf371"]]);var T=B;function M(t,e,n,o,s,r){return(0,i.wg)(),(0,i.iD)("input",{type:"file",ref:"input",multiple:"",onChange:e[0]||(e[0]=(...t)=>r.upload&&r.upload(...t))},null,544)}var V={name:"UploadFiles",methods:{upload(){let t=this.$refs.input.files;console.log(t),this.$upload(t)}}};const A=(0,f.Z)(V,[["render",M],["__scopeId","data-v-1ffae373"]]);var Q=A,N={name:"FileBrowser",components:{CurrentContent:T,UploadFiles:Q},data(){return{path:null}},methods:{getFolder(t){console.log(t),this.$get(t)},async addFolder(){var t=prompt("type the path :",this.path);t=t.endsWith("/")?t.slice(0,-1):t,t=t.startsWith("/")?t:"/"+t,console.log(t),await this.$mkdir(t)},openLoader(){let t={};t.cid=prompt("CID of the remote :","/ipfs/QmYLMaBa9bd2cfkD8UU3boFC7bRrCR74KnxGF2cFrpbyLf"),t.workspace=prompt("desired workspace :","wkspace"),console.log(t),this.$load(t.cid)},async publish(){let t=prompt("Name of the publication :","");console.log(t,this.current.cid.toString());let e=this.current.cid.toString(),n="/ipfs/"+e,o=await this.$ipfs.key.gen(t,{type:"ed25519"});console.log(o);let i=await this.$ipfs.key.list(),s=i.find((e=>e.name==t));console.log(i,JSON.stringify(s)),this.$store.commit("ipfs/setKeys",i);const r=await this.$ipfs.name.publish(n,{resolve:!0,key:t});console.log(r)}},watch:{online(){1==this.online&&this.getFolder()},current(){this.path=this.current._path}},computed:{online(){return this.$store.state.ipfs.online},current(){return this.$store.state.ipfs.current}}};const J=(0,f.Z)(N,[["render",_],["__scopeId","data-v-66a379b6"]]);var X=J;const tt={class:"current-cid"},et={key:0};function nt(t,e,n,o,s,r){return(0,i.wg)(),(0,i.iD)("div",tt,[null!=r.current?((0,i.wg)(),(0,i.iD)("div",et,(0,l.zw)(r.current._path)+" : "+(0,l.zw)(r.current.cid.toString())+" : "+(0,l.zw)(r.current.type),1)):(0,i.kq)("",!0)])}var ot={name:"CurrentCid",computed:{current(){return this.$store.state.ipfs.current}}};const it=(0,f.Z)(ot,[["render",nt],["__scopeId","data-v-10bffe95"]]);var st=it;const rt={key:0,class:"operation-result"};function lt(t,e,n,o,s,r){const a=(0,i.up)("GatewayLink"),c=(0,i.up)("GatewayPreview");return null!=r.result?((0,i.wg)(),(0,i.iD)("div",rt,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.result,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.cid},[(0,i.Wm)(a,{item:t},null,8,["item"]),(0,i.Wm)(c,{item:t},null,8,["item"])])))),128))]),(0,i.Uk)(" Result : "+(0,l.zw)(r.result),1)])):(0,i.kq)("",!0)}var at={name:"OperationResult",components:{GatewayLink:q,GatewayPreview:H},computed:{result(){return this.$store.state.ipfs.result}}};const ct=(0,f.Z)(at,[["render",lt],["__scopeId","data-v-dff3b622"]]);var ut=ct;const pt=["onClick"],dt=["onClick"];function ft(t,e,n,o,s,r){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>r.getKeys&&r.getKeys(...t))},"publications"),(0,i._)("button",{onClick:e[1]||(e[1]=(...t)=>r.importPem&&r.importPem(...t))},"import pem"),(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.keys,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id},[(0,i._)("button",{onClick:e=>r.resolve(t)},(0,l.zw)(t.name),9,pt),(0,i._)("button",{onClick:e=>r.exportPub(t)},"export pem",8,dt)])))),128))])],64)}var ht={name:"IpnsView",methods:{async resolve(t){console.log(t);const e="/ipns/"+t.id;for await(const n of this.$ipfs.name.resolve(e))console.log(n),this.$get(n)},async getKeys(){let t=await this.$ipfs.key.list();console.log(t),this.$store.commit("ipfs/setKeys",t)},async exportPub(t){let e=prompt("create a password :",""),n=await this.$ipfs.key.export(t.name,e);console.log(n)},async importPem(){let t=prompt("Enter the exported pem :",""),e=prompt("Enter the pass :",""),n=prompt("Choose a name :","");try{const o=await this.$ipfs.key.import(n,t,e);console.log(o),this.resolve(o)}catch(o){alert(o)}}},computed:{keys(){return this.$store.state.ipfs.keys}}};const mt=(0,f.Z)(ht,[["render",ft],["__scopeId","data-v-bc59ebf6"]]);var gt=mt;const wt=t=>((0,i.dD)("data-v-62385ad9"),t=t(),(0,i.Cn)(),t),yt={class:"execute-code",id:"execute-code"},vt=wt((()=>(0,i._)("hr",null,null,-1))),_t=["innerHTML"];function bt(t,e,n,s,r,l){return(0,i.wg)(),(0,i.iD)("div",yt,[(0,i.Uk)(" bloid display : "),(0,i.wy)((0,i._)("input",{ref:"script_input",placeholder:"script CID","onUpdate:modelValue":e[0]||(e[0]=t=>r.cid=t)},null,512),[[o.nr,r.cid]]),(0,i._)("button",{onClick:e[1]||(e[1]=t=>l.loadScript())}," Load & Execute console script"),(0,i._)("button",{onClick:e[2]||(e[2]=t=>l.unloadScript())}," Unload console script"),vt,(0,i.Uk)(" test console "),(0,i._)("button",{onClick:e[3]||(e[3]=t=>l.loadScript("QmdUc2BE8qU4F5i7Coq6axavDU1xCd3STEQmqH152ee2z3"))}," Load & Execute console script"),(0,i._)("button",{onClick:e[4]||(e[4]=t=>l.unloadScript("QmdUc2BE8qU4F5i7Coq6axavDU1xCd3STEQmqH152ee2z3"))}," Unload console script"),(0,i._)("div",{innerHTML:r.log_message},null,8,_t)])}n(7658);var kt={name:"ExecuteCode",data(){return{cid:"QmXYjq1E5RrEEj7UMz31sDRtqFjGVPWNFZvkZcBYRrF9no",scripts:[],log_message:""}},methods:{async loadScript(t=this.cid){console.log(t);let e="https://ipfs.io/ipfs/"+t;this.log("loading "+e),this.$loadScript(e).then((()=>{this.log("loaded "+e),-1===this.scripts.indexOf(e)?this.scripts.push(e):this.log("This script is already loaded"+e),this.log("scripts loaded "+Array.from(this.scripts))})).catch((()=>{this.log("ERROR: cannot load "+e)}))},async unloadScript(t=this.cid){let e="https://ipfs.io/ipfs/"+t;this.log("unloading "+e),this.$unloadScript(e).then((()=>{this.log("unloaded "+e),this.scripts=this.scripts.filter((t=>t!=e)),this.log("scripts loaded"+Array.from(this.scripts))})).catch((()=>{this.log("ERROR: cannot unload "+e)}))},log(t){console.log(t),this.log_message=t}}};const Ct=(0,f.Z)(kt,[["render",bt],["__scopeId","data-v-62385ad9"]]);var $t=Ct,Dt={name:"App",components:{IpfsInfo:m,FileBrowser:X,CurrentCid:st,OperationResult:ut,IpnsView:gt,ExecuteCode:$t},created(){this.$initIpfs()}};const Pt=(0,f.Z)(Dt,[["render",r]]);var Ot=Pt,xt=n(1760),Ft=n(3686);console.log(xt);var It={install:(t,e)=>{let n,o=e.store;async function i(t){let e=await(0,Ft.Z)(n.files.ls(t));return console.log(e),o.commit("ipfs/setCurrentContent",e),e}"undefined"!==typeof window&&(window.global=window),t.config.globalProperties.$initIpfs=async function(){try{n=t.config.globalProperties.$ipfs=await xt.create(e);let i=await n.id();console.log(n,i),o.commit("ipfs/setStatus","Connected to IPFS =)"),o.commit("ipfs/setOnline",n.isOnline()),o.commit("ipfs/setIpfsNode",i)}catch(i){o.commit("ipfs/setStatus",`Error: ${i}`)}},t.config.globalProperties.$get=async function(e="/"){console.log(e),e.startsWith("/ipns/")&&(e=await t.config.globalProperties.$resolve(e)),console.log(e),"/ipfs"==e&&(e="/");let s=await n.files.stat(e);s._path=e,console.log(s),o.commit("ipfs/setCurrent",s),await i(s._path)},t.config.globalProperties.$upload=async function(t){let e=o.state.ipfs.current;console.log(e);let s={truncate:!0,create:!0,flush:!0},r=1==e._path.endsWith("/")?e._path:e._path+"/";await Promise.all(Array.from(t).map((t=>n.files.write(r+t.name,t,s)))),await i(e._path)},t.config.globalProperties.$load=async function(t){console.log(t);let e=[],i={name:t+"/",path:t+"/",_path:t+"/",type:"dir",isRoot:"true",cid:t,virtual_path:"/"};e.push(i),o.commit("ipfs/setCurrent",i);for await(const o of n.ls(t))console.log(o,o.path),o.root=t,e.push(o);console.log(e),o.commit("ipfs/setCurrentContent",e)},t.config.globalProperties.$upload1=async function(t){const e=[];let i=Array.from(t).map((t=>({path:t.name,content:t,type:t.type})));console.log(i);for await(const o of n.addAll(i,{wrapWithDirectory:!0}))e.push(o);return console.log(e),o.commit("ipfs/setResult",e),e},t.config.globalProperties.$mkdir=async function(t){t=t.startsWith("/ipfs/")?t.slice(5):t,console.log(t),await n.files.mkdir(t,{parents:!0}),await this.$get(t)},t.config.globalProperties.$resolve=async function(t){console.log(t);for await(const e of this.$ipfs.name.resolve(t))return console.log(e),e}}},Ut=n(3907);const St=()=>({node:null,current:null,status:"Connecting to IPFS...",online:!1,result:null,currentContent:[],clipboard:[],keys:[]}),Wt={setCurrent(t,e){console.log(e),console.log(e.cid.toString()),t.current=e},setIpfsNode(t,e){t.node=e},setStatus(t,e){t.status=e},setOnline(t,e){t.online=e},setResult(t,e){t.result=e},setCurrentContent(t,e){t.currentContent=e},setClipboard(t,e){t.clipboard=e},setKeys(t,e){console.log(e),t.keys=e}},zt={};var jt={namespaced:!0,state:St,actions:zt,mutations:Wt};const Rt=(0,Ut.MT)({state:{},getters:{},mutations:{},actions:{},modules:{ipfs:jt}});var qt=Rt,Et=n(8139);const Lt=(0,o.ri)(Ot);Lt.use(qt),Lt.use(Et.ZP),Lt.use(It,{store:qt}),Lt.mount("#app")},7420:function(){},5856:function(){},5883:function(){},2596:function(){},3897:function(){},5819:function(){},1265:function(){},5539:function(){}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={exports:{}};return t[o].call(s.exports,s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,s){if(!o){var r=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],s=t[u][2];for(var l=!0,a=0;a<o.length;a++)(!1&s||r>=s)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(l=!1,s<r&&(r=s));if(l){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[o,i,s]}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};n.t=function(o,i){if(1&i&&(o=this(o)),8&i)return o;if("object"===typeof o&&o){if(4&i&&o.__esModule)return o;if(16&i&&"function"===typeof o.then)return o}var s=Object.create(null);n.r(s);var r={};t=t||[null,e({}),e([]),e(e)];for(var l=2&i&&o;"object"==typeof l&&!~t.indexOf(l);l=e(l))Object.getOwnPropertyNames(l).forEach((function(t){r[t]=function(){return o[t]}}));return r["default"]=function(){return o},n.d(s,r),s}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,s,r=o[0],l=o[1],a=o[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(a)var u=a(n)}for(e&&e(o);c<r.length;c++)s=r[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},o=self["webpackChunkexample_browser_vue_3"]=self["webpackChunkexample_browser_vue_3"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(4002)}));o=n.O(o)})();
//# sourceMappingURL=app.c3036a43.js.map