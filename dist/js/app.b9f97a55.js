(function(){var t={6326:function(t,e,n){"use strict";var r=n(9963),o=n(6252);const i=(0,o._)("header",{class:"header"}," Ipfs Browser ",-1);function s(t,e,n,r,s,a){const l=(0,o.up)("FileBrowser"),u=(0,o.up)("CurrentCid"),c=(0,o.up)("OperationResult"),f=(0,o.up)("IpfsInfo");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i,(0,o.Wm)(l),(0,o.Wm)(u),(0,o.Wm)(c),(0,o._)("footer",null,[(0,o.Wm)(f)])],64)}var a=n(3577);const l={key:0,class:"ipfs-info"},u={id:"ipfs-info-id"},c={id:"ipfs-info-agent"};function f(t,e,n,r,i,s){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("h3",null,(0,a.zw)(s.status),1),s.online?((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("h3",null,[(0,o.Uk)(" ID: "),(0,o._)("span",u,(0,a.zw)(s.node.id),1)]),(0,o._)("h3",null,[(0,o.Uk)(" Agent version: "),(0,o._)("span",c,(0,a.zw)(s.node.agentVersion),1)])])):(0,o.kq)("",!0)],64)}var p={name:"IpfsInfo",computed:{online(){return this.$store.state.ipfs.online},node(){return this.$store.state.ipfs.node},status(){return this.$store.state.ipfs.status}}},d=n(3744);const m=(0,d.Z)(p,[["render",f]]);var h=m;const w=t=>((0,o.dD)("data-v-63046977"),t=t(),(0,o.Cn)(),t),g={class:"browser"},v=w((()=>(0,o._)("h3",null,"Browser",-1))),y=w((()=>(0,o._)("hr",null,null,-1)));function _(t,e,n,r,i,s){const a=(0,o.up)("UploadFiles"),l=(0,o.up)("CurrentContent");return(0,o.wg)(),(0,o.iD)("div",g,[v,(0,o._)("div",null,[(0,o._)("button",{onClick:e[0]||(e[0]=t=>s.getFolder())},"GetRoot Folder "),(0,o._)("button",{onClick:e[1]||(e[1]=t=>s.addFolder())},"add (sub)folder "),(0,o.Wm)(a)]),y,(0,o.Wm)(l)])}const b={key:0,class:"current-content"},k={key:0},C={class:"scroll"},O={key:0},P=["onClick"];function $(t,e,n,r,i,s){const l=(0,o.up)("GatewayLink"),u=(0,o.up)("GatewayPreview");return null!=s.current?((0,o.wg)(),(0,o.iD)("div",b,[(0,o.Uk)((0,a.zw)(s.current._path)+" ",1),void 0!=i.content.folders?((0,o.wg)(),(0,o.iD)("div",k,"| "+(0,a.zw)(i.content.folders.length)+" folders | "+(0,a.zw)(i.content.files.length)+" files",1)):(0,o.kq)("",!0),(0,o._)("div",C,[(0,o._)("ul",null,["/"!=s.current._path?((0,o.wg)(),(0,o.iD)("li",O,[(0,o._)("button",{onClick:e[0]||(e[0]=(...t)=>s.getParent&&s.getParent(...t))},"parent")])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.content.folders,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.cid},[(0,o._)("button",{onClick:e=>s.getFolder(t.name)},(0,a.zw)(t.name)+" "+(0,a.zw)(t.type),9,P),(0,o.Wm)(l,{item:t},null,8,["item"])])))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.content.files,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.cid},[(0,o.Uk)((0,a.zw)(t.name)+" "+(0,a.zw)(t.type)+" ",1),(0,o.Wm)(l,{item:t},null,8,["item"]),(0,o.Wm)(u,{item:t},null,8,["item"])])))),128))])])])):(0,o.kq)("",!0)}const D=["href"];function I(t,e,n,r,i,s){return(0,o.wg)(),(0,o.iD)("a",{href:"https://ipfs.io/ipfs/"+n.item.cid,target:"_blank"},(0,a.zw)(n.item.name||n.item.cid),9,D)}var F={name:"GatewayLink",props:["item"]};const j=(0,d.Z)(F,[["render",I],["__scopeId","data-v-162800f4"]]);var z=j;const W=["href"],S=["src"];function G(t,e,n,r,i,s){return(0,o.wg)(),(0,o.iD)("a",{class:"gateway-preview",href:"https://ipfs.io/ipfs/"+n.item.cid,target:"_blank"},[(0,o._)("img",{src:"https://ipfs.io/ipfs/"+n.item.cid,width:"40"},null,8,S)],8,W)}var Z={name:"GatewayPreview",props:["item"]};const x=(0,d.Z)(Z,[["render",G],["__scopeId","data-v-0e062696"]]);var U=x,R={name:"CurrentContent",components:{GatewayLink:z,GatewayPreview:U},data(){return{content:{}}},methods:{getFolder(t){let e=this.current._path.endsWith("/")?this.current._path:this.current._path+"/",n=e+t;console.log(n),this.$get(n)},getParent(){let t=this.current._path.split("/").filter(((t,e,n)=>e!==n.length-(""===t?2:1))).join("/");console.log("parent",t),0==t.length&&(t="/"),this.$get(t)}},watch:{currentContent(){this.content.folders=this.currentContent.filter((t=>"directory"==t.type)).sort(((t,e)=>t.name>e.name?1:e.name>t.name?-1:0)),this.content.files=this.currentContent.filter((t=>"file"==t.type)).sort(((t,e)=>t.name>e.name?1:e.name>t.name?-1:0))}},computed:{currentContent(){return this.$store.state.ipfs.currentContent},current(){return this.$store.state.ipfs.current}}};const q=(0,d.Z)(R,[["render",$],["__scopeId","data-v-1c8a75c4"]]);var A=q;function B(t,e,n,r,i,s){return(0,o.wg)(),(0,o.iD)("input",{type:"file",ref:"input",multiple:"",onChange:e[0]||(e[0]=(...t)=>s.upload&&s.upload(...t))},null,544)}var H={name:"UploadFiles",methods:{upload(){let t=this.$refs.input.files;console.log(t),this.$upload(t)}}};const L=(0,d.Z)(H,[["render",B],["__scopeId","data-v-23c353a7"]]);var T=L,Y={name:"FileBrowser",components:{CurrentContent:A,UploadFiles:T},data(){return{path:null}},methods:{getFolder(t="/"){this.$get(t)},async addFolder(){var t=prompt("type the path :",this.path);t=t.endsWith("/")?t.slice(0,-1):t,console.log(t),await this.$mkdir(t)}},watch:{online(){1==this.online&&this.getFolder()},current(){this.path=this.current._path}},computed:{online(){return this.$store.state.ipfs.online},current(){return this.$store.state.ipfs.current}}};const M=(0,d.Z)(Y,[["render",_],["__scopeId","data-v-63046977"]]);var E=M;const K={class:"current-cid"},N={key:0};function V(t,e,n,r,i,s){return(0,o.wg)(),(0,o.iD)("div",K,[null!=s.current?((0,o.wg)(),(0,o.iD)("div",N,(0,a.zw)(s.current._path)+" : "+(0,a.zw)(s.current.cid.toString())+" : "+(0,a.zw)(s.current.type),1)):(0,o.kq)("",!0)])}var J={name:"CurrentCid",computed:{current(){return this.$store.state.ipfs.current}}};const Q=(0,d.Z)(J,[["render",V],["__scopeId","data-v-10bffe95"]]);var X=Q;const tt={key:0,class:"operation-result"};function et(t,e,n,r,i,s){const l=(0,o.up)("GatewayLink"),u=(0,o.up)("GatewayPreview");return null!=s.result?((0,o.wg)(),(0,o.iD)("div",tt,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.result,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.cid},[(0,o.Wm)(l,{item:t},null,8,["item"]),(0,o.Wm)(u,{item:t},null,8,["item"])])))),128))]),(0,o.Uk)(" Result : "+(0,a.zw)(s.result),1)])):(0,o.kq)("",!0)}var nt={name:"OperationResult",components:{GatewayLink:z,GatewayPreview:U},computed:{result(){return this.$store.state.ipfs.result}}};const rt=(0,d.Z)(nt,[["render",et],["__scopeId","data-v-dff3b622"]]);var ot=rt,it={name:"App",components:{IpfsInfo:h,FileBrowser:E,CurrentCid:X,OperationResult:ot},created(){this.$initIpfs()}};const st=(0,d.Z)(it,[["render",s]]);var at=st,lt=(n(7658),n(1760)),ut=n(3686);console.log(lt);var ct={install:(t,e)=>{let n,r=e.store;async function o(t){let e=await(0,ut.Z)(n.files.ls(t));return console.log(e),r.commit("ipfs/setCurrentContent",e),e}"undefined"!==typeof window&&(window.global=window),t.config.globalProperties.$initIpfs=async function(){try{n=t.config.globalProperties.$ipfs=await lt.create(e);let o=await n.id();console.log(n,o),r.commit("ipfs/setStatus","Connected to IPFS =)"),r.commit("ipfs/setOnline",n.isOnline()),r.commit("ipfs/setIpfsNode",o)}catch(o){r.commit("ipfs/setStatut",`Error: ${o}`)}},t.config.globalProperties.$get=async function(t="/"){let e=await n.files.stat(t);e._path=t,r.commit("ipfs/setCurrent",e),await o(e._path)},t.config.globalProperties.$upload=async function(t){let e=r.state.ipfs.current;console.log(e);let i={create:!0},s=1==e._path.endsWith("/")?e._path:e._path+"/";await Promise.all(Array.from(t).map((t=>n.files.write(s+t.name,t,i)))),await o(e._path)},t.config.globalProperties.$upload1=async function(t){const e=[];let o=Array.from(t).map((t=>({path:t.name,content:t,type:t.type})));console.log(o);for await(const r of n.addAll(o,{wrapWithDirectory:!0}))e.push(r);return console.log(e),r.commit("ipfs/setResult",e),e},t.config.globalProperties.$mkdir=async function(t){await n.files.mkdir(t,{parents:!0}),await this.$get(t)}}},ft=n(3907);const pt=()=>({node:null,current:null,status:"Connecting to IPFS...",online:!1,result:null,currentContent:[]}),dt={setCurrent(t,e){console.log(e),console.log(e.cid.toString()),t.current=e},setIpfsNode(t,e){t.node=e},setStatus(t,e){t.status=e},setOnline(t,e){t.online=e},setResult(t,e){t.result=e},setCurrentContent(t,e){t.currentContent=e}},mt={};var ht={namespaced:!0,state:pt,actions:mt,mutations:dt};const wt=(0,ft.MT)({state:{},getters:{},mutations:{},actions:{},modules:{ipfs:ht}});var gt=wt;const vt=(0,r.ri)(at);vt.use(gt),vt.use(ct,{store:gt}),vt.mount("#app")},7420:function(){},5856:function(){},5883:function(){},2596:function(){},3897:function(){},5819:function(){},1265:function(){},5539:function(){}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,r,o,i){if(!r){var s=1/0;for(c=0;c<t.length;c++){r=t[c][0],o=t[c][1],i=t[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[l])}))?r.splice(l--,1):(a=!1,i<s&&(s=i));if(a){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[r,o,i]}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&o&&r;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((function(t){s[t]=function(){return r[t]}}));return s["default"]=function(){return r},n.d(i,s),i}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,i,s=r[0],a=r[1],l=r[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var c=l(n)}for(e&&e(r);u<s.length;u++)i=s[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},r=self["webpackChunkexample_browser_vue_3"]=self["webpackChunkexample_browser_vue_3"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(6326)}));r=n.O(r)})();
//# sourceMappingURL=app.b9f97a55.js.map